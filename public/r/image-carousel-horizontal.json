{
  "name": "image-carousel-horizontal",
  "type": "registry:component",
  "dependencies": [
    "lucide-react",
    "embla-carousel-react",
    "embla-carousel"
  ],
  "registryDependencies": [
    "button"
  ],
  "files": [
    {
      "type": "registry:component",
      "content": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n} from \"@radix-ui/react-dialog\";\nimport { type EmblaOptionsType } from \"embla-carousel\";\nimport useEmblaCarousel from \"embla-carousel-react\";\nimport { ArrowLeft, ArrowRight } from \"lucide-react\";\nimport React, { useCallback, useEffect, useState } from \"react\";\n\ntype ThumbPropType = {\n  selected: boolean;\n  index: number;\n  onClick: () => void;\n  imgUrl: string;\n};\n\nconst getAspectRatioClass = (ratio?: string) => {\n  switch (ratio) {\n    case \"square\":\n      return \"aspect-square\"; // 1:1\n    case \"video\":\n      return \"aspect-video\"; // 16:9\n    case \"wide\":\n      return \"aspect-4/3\"; // 4:3\n    case \"auto\":\n      return \"aspect-auto\"; // Natural image aspect ratio\n    default:\n      return \"aspect-4/3\"; // Default 4:3\n  }\n};\n\nconst ImageContainer: React.FC<{\n  image: string;\n  alt: string;\n  fit?: \"cover\" | \"contain\" | \"fill\";\n  aspectRatio?: string;\n}> = ({ alt, aspectRatio, fit = \"cover\", image }) => {\n  return (\n    <div\n      className={cn(\n        \"relative w-full overflow-hidden rounded-lg bg-gray-100\",\n        getAspectRatioClass(aspectRatio)\n      )}\n    >\n      {/* <Image\n        unoptimized\n        width={400}\n        height={600}\n        src={image}\n        alt={alt}\n        className={cn(\n          \"absolute inset-0 h-full w-full\",\n          fit === \"contain\" && \"object-contain\",\n          fit === \"cover\" && \"object-cover\",\n          fit === \"fill\" && \"object-fill\"\n        )}\n      /> */}\n\n      <Dialog>\n        <DialogTrigger asChild>\n          <div className={`cursor-pointer`}>\n            <img\n              src={image}\n              alt=\"Preview\"\n              width={400}\n              height={600}\n              className={cn(\n                \"absolute inset-0 h-full w-full\",\n                fit === \"contain\" && \"object-contain\",\n                fit === \"cover\" && \"object-cover\",\n                fit === \"fill\" && \"object-fill\"\n              )}\n            />\n          </div>\n        </DialogTrigger>\n\n        <DialogPortal>\n          <DialogOverlay className=\"fixed inset-0 z-50 bg-black/80\" />\n          <DialogContent className=\"fixed top-1/2 left-1/2 z-50 w-[calc(100vw-2rem)] max-w-[90vw] -translate-x-1/2 -translate-y-1/2 bg-gray-100 p-0 sm:w-auto\">\n            <DialogTitle className=\"sr-only\">Image</DialogTitle>\n\n            <img\n              src={image}\n              alt=\"Full size\"\n              width=\"3000px\"\n              height=\"3000px\"\n              className={cn(\n                \"h-auto max-h-[calc(100vh-4rem)] w-full object-contain\"\n              )}\n            />\n          </DialogContent>\n        </DialogPortal>\n      </Dialog>\n    </div>\n  );\n};\n\nconst Thumb: React.FC<ThumbPropType> = (props) => {\n  const { imgUrl, index, onClick, selected } = props;\n\n  return (\n    <div\n      className={cn(\n        \"transition-opacity duration-200\",\n        selected ? \"opacity-100\" : \"opacity-50 hover:opacity-70\",\n        // Horizontal layout (top/bottom)\n        \"group-[.thumbs-horizontal]:min-w-0 group-[.thumbs-horizontal]:flex-[0_0_22%] group-[.thumbs-horizontal]:pl-3 sm:group-[.thumbs-horizontal]:flex-[0_0_15%]\",\n        // Vertical layout (left/right)\n        \"group-[.thumbs-vertical]:w-full group-[.thumbs-vertical]:pt-3\"\n      )}\n    >\n      <button\n        onClick={onClick}\n        className=\"relative w-full cursor-pointer touch-manipulation appearance-none overflow-hidden rounded-md border-0 bg-transparent p-0\"\n        type=\"button\"\n      >\n        {/* <ImageContainer\n          image={imgUrl}\n          alt={`Thumbnail ${index + 1}`}\n          fit=\"cover\"\n          aspectRatio=\"square\"\n        /> */}\n        <div\n          className={cn(\n            \"relative w-full overflow-hidden rounded-lg bg-gray-100\",\n            getAspectRatioClass(\"square\")\n          )}\n        >\n          <img\n            src={imgUrl}\n            alt={`Thumbnail ${index + 1}`}\n            width={400}\n            height={600}\n            className={cn(\"h-full w-full object-cover\")}\n          />\n        </div>\n      </button>\n    </div>\n  );\n};\n\ninterface ImageCarousel_HorizontalProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  images: string[];\n  opts?: EmblaOptionsType;\n  showControls?: boolean;\n  imageFit?: \"cover\" | \"contain\" | \"fill\";\n  aspectRatio?: \"square\" | \"video\" | \"wide\" | \"auto\";\n  thumbPosition?: \"bottom\" | \"top\" | \"left\" | \"right\";\n  showThumbs?: boolean;\n}\n\nconst ImageCarousel_Horizontal: React.FC<ImageCarousel_HorizontalProps> = ({\n  aspectRatio = \"wide\",\n  className,\n  imageFit = \"contain\",\n  images,\n  opts,\n  showControls = true,\n  showThumbs = true,\n  thumbPosition = \"left\",\n  ...props\n}) => {\n  const [emblaRef, emblaApi] = useEmblaCarousel({\n    ...opts,\n    axis: \"x\",\n  });\n\n  const [emblaThumbsRef, emblaThumbsApi] = useEmblaCarousel(\n    showThumbs\n      ? {\n          axis:\n            thumbPosition === \"left\" || thumbPosition === \"right\" ? \"y\" : \"x\",\n          containScroll: \"keepSnaps\",\n          dragFree: true,\n        }\n      : undefined\n  );\n\n  const onThumbClick = useCallback(\n    (index: number) => {\n      if (!emblaApi || !showThumbs || !emblaThumbsApi) return;\n      emblaApi.scrollTo(index);\n      emblaThumbsApi.scrollTo(index);\n    },\n    [emblaApi, emblaThumbsApi, showThumbs]\n  );\n\n  const [canScrollPrev, setCanScrollPrev] = useState(false);\n  const [canScrollNext, setCanScrollNext] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  const scrollPrev = useCallback(() => {\n    if (emblaApi) emblaApi.scrollPrev();\n  }, [emblaApi]);\n\n  const scrollNext = useCallback(() => {\n    if (emblaApi) emblaApi.scrollNext();\n  }, [emblaApi]);\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (event.key === \"ArrowLeft\") {\n        event.preventDefault();\n        scrollPrev();\n      } else if (event.key === \"ArrowRight\") {\n        event.preventDefault();\n        scrollNext();\n      }\n    },\n    [scrollPrev, scrollNext]\n  );\n\n  const onSelect = useCallback(() => {\n    if (!emblaApi) return;\n    setSelectedIndex(emblaApi.selectedScrollSnap());\n    setCanScrollPrev(emblaApi.canScrollPrev());\n    setCanScrollNext(emblaApi.canScrollNext());\n\n    if (showThumbs && emblaThumbsApi) {\n      emblaThumbsApi.scrollTo(emblaApi.selectedScrollSnap());\n    }\n  }, [emblaApi, emblaThumbsApi, showThumbs]);\n\n  useEffect(() => {\n    if (!emblaApi) return;\n\n    onSelect();\n    emblaApi.on(\"reInit\", onSelect);\n    emblaApi.on(\"select\", onSelect);\n\n    return () => {\n      emblaApi.off(\"reInit\", onSelect);\n      emblaApi.off(\"select\", onSelect);\n    };\n  }, [emblaApi, onSelect]);\n\n  return (\n    <div\n      className={cn(\n        \"relative w-full max-w-3xl\",\n        {\n          \"flex-row-reverse\": showThumbs && thumbPosition === \"left\",\n          \"flex gap-4\":\n            showThumbs &&\n            (thumbPosition === \"left\" || thumbPosition === \"right\"),\n        },\n        className\n      )}\n      role=\"region\"\n      aria-roledescription=\"carousel\"\n      onKeyDownCapture={handleKeyDown}\n      {...props}\n    >\n      {showThumbs && thumbPosition === \"top\" && (\n        <div className=\"mb-4\">\n          <div className=\"overflow-hidden\" ref={emblaThumbsRef}>\n            <div className=\"thumbs-horizontal group -ml-3 flex\">\n              {images?.map((image, index) => (\n                <Thumb\n                  key={index}\n                  onClick={() => onThumbClick(index)}\n                  selected={index === selectedIndex}\n                  index={index}\n                  imgUrl={image}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div\n        className={cn(\n          \"relative\",\n          showThumbs &&\n            (thumbPosition === \"left\" || thumbPosition === \"right\") &&\n            \"flex-[1_1_75%]\"\n        )}\n        aria-label=\"Image carousel controls\"\n      >\n        <div ref={emblaRef} className=\"overflow-hidden rounded-lg\">\n          <div className=\"-ml-4 flex\">\n            {images?.map((image, index) => (\n              <div\n                key={index}\n                className=\"min-w-0 shrink-0 grow-0 basis-full pl-4\"\n                role=\"group\"\n                aria-roledescription=\"slide\"\n              >\n                <ImageContainer\n                  image={image}\n                  alt={`Slide ${index + 1}`}\n                  fit={imageFit}\n                  aspectRatio={aspectRatio}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {showControls && (\n          <>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              className=\"bg-background/80 hover:bg-background dark:bg-background/80 dark:hover:bg-background absolute top-1/2 left-[2%] z-10 h-8 w-8 -translate-y-1/2 rounded-full backdrop-blur-xs disabled:opacity-50\"\n              disabled={!canScrollPrev}\n              onClick={scrollPrev}\n            >\n              <ArrowLeft className=\"h-4 w-4\" />\n              <span className=\"sr-only\">Previous slide</span>\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              className=\"bg-background/80 hover:bg-background dark:bg-background/80 dark:hover:bg-background absolute top-1/2 right-[2%] z-10 h-8 w-8 -translate-y-1/2 rounded-full backdrop-blur-xs disabled:opacity-50\"\n              disabled={!canScrollNext}\n              onClick={scrollNext}\n            >\n              <ArrowRight className=\"h-4 w-4\" />\n              <span className=\"sr-only\">Next slide</span>\n            </Button>\n          </>\n        )}\n      </div>\n\n      {showThumbs &&\n        (thumbPosition === \"bottom\" ||\n          thumbPosition === \"left\" ||\n          thumbPosition === \"right\") && (\n          <div\n            className={cn(\n              thumbPosition === \"left\" || thumbPosition === \"right\"\n                ? \"relative flex-[0_0_20%]\"\n                : \"mt-4\"\n            )}\n          >\n            <div\n              className={cn(\n                \"overflow-hidden\",\n                (thumbPosition === \"left\" || thumbPosition === \"right\") &&\n                  \"absolute inset-0\"\n              )}\n              ref={emblaThumbsRef}\n            >\n              <div\n                className={cn(\n                  thumbPosition === \"bottom\"\n                    ? \"thumbs-horizontal group -ml-3 flex\"\n                    : \"thumbs-vertical group -mt-3 flex h-full flex-col\"\n                )}\n              >\n                {images?.map((image, index) => (\n                  <Thumb\n                    key={index}\n                    onClick={() => onThumbClick(index)}\n                    selected={index === selectedIndex}\n                    index={index}\n                    imgUrl={image}\n                  />\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n    </div>\n  );\n};\n\nexport default ImageCarousel_Horizontal;\n",
      "path": "/components/commerce-ui/image-carousel/horizontal/image-carousel-horizontal.tsx",
      "target": "/components/commerce-ui/image-carousel-horizontal.tsx"
    }
  ]
}